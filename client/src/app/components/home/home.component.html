<div class="container py-5">
  <div class="row">
    <div class="col-12">
      <!-- Header com logo e botão de sair -->
      <div class="card shadow mb-4">
        <div class="card-header bg-danger text-white">
          <div class="d-flex justify-content-between align-items-center">
            <h4 class="mb-0">MediChat</h4>
            <button (click)="logout()" class="btn btn-light btn-sm">
              Sair
            </button>
          </div>
        </div>
      </div>

      <!-- Loading -->
      <div *ngIf="isLoading" class="text-center py-5">
        <div class="spinner-border text-danger" role="status">
          <span class="visually-hidden">Carregando...</span>
        </div>
        <p class="mt-3">Verificando suas informações...</p>
      </div>

      <!-- Formulário do paciente se não tiver informações -->
      <div *ngIf="!isLoading && !hasPatientInfo">
        <div class="alert alert-info mb-4">
          <p class="mb-0">
            Para começar a usar o MediChat, precisamos de algumas informações
            básicas sobre você.
          </p>
        </div>
        <app-patient-form
          (patientSaved)="onPatientSaved($event)"
        ></app-patient-form>
      </div>

      <!-- Home se tiver informações do paciente -->
      <div *ngIf="!isLoading && hasPatientInfo">
        <div class="card shadow">
          <div class="card-body">
            <h5 class="card-title">Bem-vindo ao MediChat!</h5>
            <p class="card-text">
              Sua plataforma de chat médico está pronta para uso.
            </p>

            <div class="alert alert-success mb-4">
              <h6>Suas informações foram registradas:</h6>
              <ul class="mb-0" *ngIf="patientInfo">
                <li><strong>Nome:</strong> {{ patientInfo.name }}</li>
                <li><strong>Idade:</strong> {{ patientInfo.age }} anos</li>
                <li><strong>Gênero:</strong> {{ patientInfo.gender }}</li>
                <li><strong>Peso:</strong> {{ patientInfo.weight }} kg</li>
                <li><strong>Altura:</strong> {{ patientInfo.height }} m</li>
              </ul>
            </div>

            <p>
              Aqui você poderá conversar com nossa IA para diagnósticos
              preliminares e aconselhamento médico.
            </p>

            <div class="d-grid gap-2 col-md-6 mx-auto mt-4">
              <a routerLink="/chat" class="btn btn-danger"
                >Iniciar Chat Médico</a
              >
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
